<!-- templates/reset_with_token.html -->
{% extends 'base.html' %}

{% block title %}Reset Password{% endblock %}

{% block body %}
    <h2>Reset Password</h2>
    {% if token %}
        <form action="{{ url_for('reset_with_token', token=token) }}" method="post">
            <div class="form-group">
                <label for="password">New Password:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div class="form-group">
                <label for="confirm_password">Confirm New Password:</label>
                <input type="password" id="confirm_password" name="confirm_password" required>
            </div>
            <div class="form-group">
                <input type="submit" value="Reset Password">
            </div>
        </form>
    {% else %}
        <p>The password reset token is invalid or has expired.</p>
        <a href="{{ url_for('reset_password') }}">Request a new password reset.</a>
    {% endif %}
    <div class="form-group">
        <a href="{{ url_for('login') }}">Back to Login</a>
    </div>
{% endblock %}